vars:
  email-notify: &email-notify
    template: default.html
    priority_header: "1"
    from: ysrinu95@gmail.com
    to:
      - ysrinu95@gmail.com
    transport:
      type: sqs
      queue: https://sqs.us-east-1.amazonaws.com/172327596604/aikyam-cloud-custodian-periodic-notifications

policies:
  - name: aws-phd-health-event-issue
    resource: aws.health-event
    description: |
      Notifies of Personal Health Dashboard account notification events
    filters:
      - type: value
        key: statusCode
        op: not-equal
        value: closed
    actions:
      - type: notify
        <<: *email-notify
        subject: "ðŸ“¢ AWS PHD - Account Notification - {{ account }} - {{ region }}"
        violation_desc: |
          **Personal Health Dashboard - Account Notification**
          
          **Event Type:** {{ resource.eventTypeCategory }}
          **Status:** {{ resource.statusCode }}
          **Region:** {{ resource.region }}
          
          See Personal Health Dashboard 'Other notifications' tab for more info:
          https://health.aws.amazon.com