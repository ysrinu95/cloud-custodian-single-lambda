policies:
- name: aws-phd-health-event-account-notification
  resource: aws.health-event
  description: 'Notifies of Personal Health Dashboard account notification events'
  filters:
  - type: value
    key: eventTypeCategory
    value: accountNotification
  - type: value
    key: statusCode
    value: open
  - type: value
    key: lastUpdatedTime
    op: less-than
    value_type: age
    value: 1
  actions:
  - template: aws-basic_email.html
    to:
    - ysrinu95@gmail.com
    - event-owner
    - resource-owner
    transport:
      type: sqs
      queue: https://sqs.us-east-1.amazonaws.com/172327596604/custodian-mailer-queue
    type: notify
    title: PHD - Account Notification
    action_desc: See Personal Health Dashboard 'Other notifications' tab @ https://health.aws.amazon.com
      for more info.
vars:
  tags:
    contact: ysrinu95@gmail.com
    environment: production
    repo: ysrinu95/cloud-custodian
  email-notify:
    template: aws-basic_email.html
    to:
    - ysrinu95@gmail.com
    - event-owner
    - resource-owner
    transport:
      type: sqs
      queue: https://sqs.us-east-1.amazonaws.com/172327596604/custodian-mailer-queue
  phd-conditions:
  - region: us-east-1
  - type: value
    key: account_id
    op: in
    value:
    - '101300729637'
