policies:
- name: aws-cloudwatch-log-group-retention
  resource: aws.log-group
  description: 'Notifies and sets the retention for log groups set to never expire'
  filters:
  - retentionInDays: absent
  actions:
  - type: retention
    days: 365
  - template: aws-basic_email.html
    to:
    - ysrinu95@gmail.com
    - event-owner
    - resource-owner
    transport:
      type: sqs
      queue: https://sqs.us-west-2.amazonaws.com/172327596604/custodian-mailer-queue
    type: notify
    subject: '[c7n] [{{ account }}] CloudWatch Log Group Retention Updated ({{ region
      }})'
    violation_desc: CloudWatch Log Group with no retention set
    action_desc: 'Log group retention has been updated to 365 days.<br>

      If the log group is defined in code, please update the source to include a retention
      period.<br>

      See <a href="https://docs.aws.amazon.com/managedservices/latest/userguide/log-customize-retention.html">AWS
      documentation</a> for more info.

      '
vars:
  tags:
    contact: ysrinu95@gmail.com
    environment: production
    repo: ysrinu95/cloud-custodian
  email-notify:
    template: aws-basic_email.html
    to:
    - ysrinu95@gmail.com
    - event-owner
    - resource-owner
    transport:
      type: sqs
      queue: https://sqs.us-west-2.amazonaws.com/172327596604/custodian-mailer-queue
